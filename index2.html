<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body{
  background:#000;
  font-family:sans-serif;
  color:#fff;
  overflow-x:hidden;
}

/* just demo sections */
.spacer{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  background:#111;
}


/* ============================= */
/* TIMELINE SECTION */
/* ============================= */

#circle-timeline{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}

/* big circle */
.circle{
  width:700px;
  height:700px;
  border-radius:50%;
  border:1px solid rgba(255,255,255,.25);
  position:relative;
  transform-origin:center center;
}

/* dots */
.circle_item{
  position:absolute;
  top:100%;
  left:50%;
  transform-origin:0 -350px;
  opacity:.25;
  transition:.35s ease;
}

/* active */
.circle_item.current{
  opacity:1;
}

/* dot look */
.circle_dot{
  width:14px;
  height:14px;
  border-radius:50%;
  background:#555;
}

.circle_item.current .circle_dot{
  background:#ffb937;
  transform:scale(1.6);
}
</style>
</head>



<body>

<div class="spacer">Section Above</div>


<!-- ============================= -->
<!-- PINNED CIRCLE -->
<!-- ============================= -->

<section id="circle-timeline">

  <div class="circle">

    <!-- ðŸ”¥ add/remove freely -->
    <div class="circle_item current"><div class="circle_dot"></div></div>
    <div class="circle_item"><div class="circle_dot"></div></div>
    <div class="circle_item"><div class="circle_dot"></div></div>
    <div class="circle_item"><div class="circle_dot"></div></div>
    <div class="circle_item"><div class="circle_dot"></div></div>
    <div class="circle_item"><div class="circle_dot"></div></div>

  </div>

</section>


<div class="spacer">Next Section</div>



<script>
gsap.registerPlugin(ScrollTrigger);

const circle = document.querySelector(".circle");
const items = gsap.utils.toArray(".circle_item");

const total = items.length;
const stepAngle = 360 / total;


/* ================================= */
/* AUTO POSITION ITEMS (no manual deg) */
/* ================================= */

items.forEach((el,i)=>{
  gsap.set(el,{
    rotate: stepAngle * i
  });
});


/* highlight active */
function setActive(i){
  items.forEach((el,index)=>{
    el.classList.toggle("current", index === i);
  });
}


/* ================================= */
/* PIN + CLOCKWISE STEP SCROLL */
/* ================================= */

let tl = gsap.timeline({
  scrollTrigger:{
    trigger:"#circle-timeline",
    start:"top top",
    end:"+=" + window.innerHeight * total,
    pin:true,
    scrub:true,
    snap:1/(total-1),
    anticipatePin:1
  }
});

/* rotate parent clockwise */
tl.to(circle,{
  rotate: stepAngle * (total-1),
  ease:"none",
  onUpdate(){
    let step = Math.round(tl.progress() * (total-1));
    setActive(step);
  }
});
</script>


</body>
</html>
